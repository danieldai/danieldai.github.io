
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="http://localhost:8000/theme/pygments/github.min.css">


  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/font-awesome/css/solid.css">





  


 

<meta name="author" content="Daniel Dai" />
<meta name="description" content="ip link Show link layer interface information ip link 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc …" />
<meta name="keywords" content="">


  <meta property="og:site_name" content="Daniel Dai的网络日志"/>
  <meta property="og:title" content="IPRoute2 Basic"/>
  <meta property="og:description" content="ip link Show link layer interface information ip link 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc …"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="http://localhost:8000/iproute2-basic.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2016-08-04 10:00:00+08:00"/>
  <meta property="article:modified_time" content=""/>
  <meta property="article:author" content="http://localhost:8000/author/daniel-dai.html">
  <meta property="article:section" content="Linux"/>
  <meta property="og:image" content="http://localhost:8000/daniel_150.jpeg">

  <title>Daniel Dai的网络日志 &ndash; IPRoute2 Basic</title>


  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0025679579683360"
          crossorigin="anonymous"></script>
</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="http://localhost:8000/">
        <img src="http://localhost:8000/daniel_150.jpeg" alt="Daniel Dai" title="Daniel Dai">
      </a>

      <h3>
        <a href="http://localhost:8000/">Daniel Dai</a>
      </h3>

<p>互联网产品和技术</p>

      <nav>
        <ul class="list">


              <li>
                <a target="_self"
                   href="http://localhost:8000/pages/about-me.html#about-me">
                  关于我
                </a>
              </li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-github" href="https://github.com/danieldai" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/daniel-dai" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/danieldai_com" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>

    <nav>
      <a href="http://localhost:8000/">首页</a>

      <a href="/archives.html">存档</a>
      <a href="/categories.html">分类</a>
      <a href="/tags.html">标签</a>



      <a href="https://kalacloud.com" target="__blank">卡拉云后台系统</a>
    </nav>

<article class="single">
  <header>
      
    <h1 id="iproute2-basic">IPRoute2 Basic</h1>
    <p>
      发布时间: 2016年08月04日, 分类: <a href="http://localhost:8000/category/linux.html">Linux</a>

    </p>
  </header>


  <div>
    <h3>ip link</h3>
<p>Show link layer interface information</p>
<div class="highlight"><pre><span></span><code>ip link
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">lo</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">LOOPBACK</span><span class="o">,</span><span class="n">UP</span><span class="o">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">65536</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">noqueue</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">UNKNOWN</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">qlen</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">loopback</span><span class="w"> </span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span>
<span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="n">ens33</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BROADCAST</span><span class="o">,</span><span class="n">MULTICAST</span><span class="o">,</span><span class="n">UP</span><span class="o">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">pfifo_fast</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">UP</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">qlen</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">ether</span><span class="w"> </span><span class="mi">00</span><span class="o">:</span><span class="mi">0</span><span class="n">c</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="n">fc</span><span class="o">:</span><span class="n">a7</span><span class="o">:</span><span class="n">ea</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span>
</code></pre></div>

<p>To get statistics about how an interface is communicating, you can query statistics from each interface by passing the -s option to the link subcommand:</p>
<div class="highlight"><pre><span></span><code><span class="nv">ip</span><span class="w"> </span><span class="o">-</span><span class="nv">s</span><span class="w"> </span><span class="nv">link</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="nv">ens33</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="n">ens33</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BROADCAST</span><span class="o">,</span><span class="n">MULTICAST</span><span class="o">,</span><span class="n">UP</span><span class="o">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">pfifo_fast</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">UP</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">qlen</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">ether</span><span class="w"> </span><span class="mi">00</span><span class="o">:</span><span class="mi">0</span><span class="n">c</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="n">fc</span><span class="o">:</span><span class="n">a7</span><span class="o">:</span><span class="n">ea</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span>
<span class="w">    </span><span class="n">RX</span><span class="o">:</span><span class="w"> </span><span class="n">bytes</span><span class="w">  </span><span class="n">packets</span><span class="w">  </span><span class="n">errors</span><span class="w">  </span><span class="n">dropped</span><span class="w"> </span><span class="n">overrun</span><span class="w"> </span><span class="n">mcast</span><span class="w">   </span>
<span class="w">    </span><span class="mi">1060924019</span><span class="w"> </span><span class="mi">724744</span><span class="w">   </span><span class="mi">0</span><span class="w">       </span><span class="mi">0</span><span class="w">       </span><span class="mi">0</span><span class="w">       </span><span class="mi">0</span><span class="w">       </span>
<span class="w">    </span><span class="n">TX</span><span class="o">:</span><span class="w"> </span><span class="n">bytes</span><span class="w">  </span><span class="n">packets</span><span class="w">  </span><span class="n">errors</span><span class="w">  </span><span class="n">dropped</span><span class="w"> </span><span class="n">carrier</span><span class="w"> </span><span class="n">collsns</span><span class="w"> </span>
<span class="w">    </span><span class="mi">12143852</span><span class="w">   </span><span class="mi">195148</span><span class="w">   </span><span class="mi">0</span><span class="w">       </span><span class="mi">0</span><span class="w">       </span><span class="mi">0</span><span class="w">       </span><span class="mi">0</span><span class="w"> </span>
</code></pre></div>

<h3>ip addr</h3>
<p>get an overview of the addresses attached to each interface</p>
<div class="highlight"><pre><span></span><code><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">lo</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">LOOPBACK</span><span class="o">,</span><span class="n">UP</span><span class="o">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">65536</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">noqueue</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">UNKNOWN</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">qlen</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">loopback</span><span class="w"> </span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span><span class="o">:</span><span class="mi">00</span>
<span class="w">    </span><span class="n">inet</span><span class="w"> </span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">/</span><span class="mi">8</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">lo</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="w">    </span><span class="n">inet6</span><span class="w"> </span><span class="o">::</span><span class="mi">1</span><span class="o">/</span><span class="mi">128</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">host</span><span class="w"> </span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="n">ens33</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BROADCAST</span><span class="o">,</span><span class="n">MULTICAST</span><span class="o">,</span><span class="n">UP</span><span class="o">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">pfifo_fast</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">UP</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">qlen</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">ether</span><span class="w"> </span><span class="mi">00</span><span class="o">:</span><span class="mi">0</span><span class="n">c</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span><span class="n">fc</span><span class="o">:</span><span class="n">a7</span><span class="o">:</span><span class="n">ea</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span>
<span class="w">    </span><span class="n">inet</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">138.128</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">138.255</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="kd">dynamic</span><span class="w"> </span><span class="n">ens33</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="mi">1425</span><span class="n">sec</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="mi">1425</span><span class="n">sec</span>
<span class="w">    </span><span class="n">inet6</span><span class="w"> </span><span class="n">fe80</span><span class="o">::</span><span class="mi">1856</span><span class="o">:</span><span class="n">a02b</span><span class="o">:</span><span class="mi">4</span><span class="n">c91</span><span class="o">:</span><span class="n">cea6</span><span class="o">/</span><span class="mi">64</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">link</span><span class="w"> </span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="n">docker0</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BROADCAST</span><span class="o">,</span><span class="n">MULTICAST</span><span class="o">,</span><span class="n">UP</span><span class="o">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">noqueue</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">UP</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">ether</span><span class="w"> </span><span class="mi">02</span><span class="o">:</span><span class="mi">42</span><span class="o">:</span><span class="mi">34</span><span class="o">:</span><span class="n">a4</span><span class="o">:</span><span class="mi">7</span><span class="n">b</span><span class="o">:</span><span class="mi">20</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span>
<span class="w">    </span><span class="n">inet</span><span class="w"> </span><span class="mf">172.17</span><span class="o">.</span><span class="mf">0.1</span><span class="o">/</span><span class="mi">16</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="n">docker0</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="w">    </span><span class="n">inet6</span><span class="w"> </span><span class="n">fe80</span><span class="o">::</span><span class="mi">42</span><span class="o">:</span><span class="mi">34</span><span class="n">ff</span><span class="o">:</span><span class="n">fea4</span><span class="o">:</span><span class="mi">7</span><span class="n">b20</span><span class="o">/</span><span class="mi">64</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">link</span><span class="w"> </span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="mi">5</span><span class="o">:</span><span class="w"> </span><span class="n">veth78282f4</span><span class="err">@</span><span class="n">if4</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BROADCAST</span><span class="o">,</span><span class="n">MULTICAST</span><span class="o">,</span><span class="n">UP</span><span class="o">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">noqueue</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">docker0</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">UP</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">ether</span><span class="w"> </span><span class="n">b2</span><span class="o">:</span><span class="mi">42</span><span class="o">:</span><span class="n">c4</span><span class="o">:</span><span class="mi">47</span><span class="o">:</span><span class="mi">0</span><span class="n">c</span><span class="o">:</span><span class="mi">16</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="o">:</span><span class="n">ff</span><span class="w"> </span><span class="n">link</span><span class="o">-</span><span class="n">netnsid</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">inet6</span><span class="w"> </span><span class="n">fe80</span><span class="o">::</span><span class="n">b042</span><span class="o">:</span><span class="n">c4ff</span><span class="o">:</span><span class="n">fe47</span><span class="o">:</span><span class="n">c16</span><span class="o">/</span><span class="mi">64</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">link</span><span class="w"> </span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
</code></pre></div>

<p>To get a specific interface, you can use this syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nx">ip</span><span class="w"> </span><span class="kd">addr</span><span class="w"> </span><span class="nx">show</span><span class="w"> </span><span class="nx">eth0</span>
</code></pre></div>

<h3>ip route</h3>
<p>The routing table contains kernel information about the paths to other network locations. We can print off the current routing table by typing:</p>
<div class="highlight"><pre><span></span><code>ip route
</code></pre></div>

<div class="highlight"><pre><span></span><code>default via 192.168.138.2 dev ens33  proto static  metric 100 
169.254.0.0/16 dev docker0  scope link  metric 1000 
172.17.0.0/16 dev docker0  proto kernel  scope link  src 172.17.0.1 
192.168.138.0/24 dev ens33  proto kernel  scope link  src 192.168.138.128  metric 100
</code></pre></div>

<h2>How To Configure Network Interfaces and Addresses</h2>
<h3>Config interface</h3>
<div class="highlight"><pre><span></span><code>ip link set eth1 up
ip link set eth1 down
</code></pre></div>

<p>You can also use the ip link subcommand to set attributes about the interface. For instance, if you would like to change the multicast flag on or off for your interface, you can type:</p>
<div class="highlight"><pre><span></span><code>ip link set eth1 multicast on
ip link set eth1 multicast off
</code></pre></div>

<p>You can adjust the mtu and package queue length like this:</p>
<div class="highlight"><pre><span></span><code>ip link set eth1 mtu 1500
ip link set eth1 txqueuelen 1000
</code></pre></div>

<p>If the interface you are configuring is down, you can adjust the interface name and the arp flag associated with the device:</p>
<div class="highlight"><pre><span></span><code>ip link set eth1 name eth10
ip link set eth1 arp on
</code></pre></div>

<p>To adjust the addresses associated with the interfaces, we again use the <code>ip addr</code> subcommand.</p>
<p>We can add an address to a device by typing:</p>
<div class="highlight"><pre><span></span><code><span class="nx">ip</span><span class="w"> </span><span class="kd">addr</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">ip_address</span><span class="o">/</span><span class="nx">net_prefix</span><span class="w"> </span><span class="nx">brd</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">dev</span><span class="w"> </span><span class="kd">interface</span>
</code></pre></div>

<p>The <code>brd +</code> portion of the command automatically sets the broadcast address. Multiple addresses can be added to each interface without a problem.</p>
<p>We can get rid of addresses with the inverse operation. To delete a specific address associated with an interface, you can use it like this:</p>
<div class="highlight"><pre><span></span><code><span class="nx">ip</span><span class="w"> </span><span class="kd">addr</span><span class="w"> </span><span class="nx">del</span><span class="w"> </span><span class="nx">ip_address</span><span class="o">/</span><span class="nx">net_prefix</span><span class="w"> </span><span class="nx">dev</span><span class="w"> </span><span class="kd">interface</span>
</code></pre></div>

<p>Optionally, you can omit the address, and the first listed address associated with that interface will be deleted.</p>
<p>You can also adjust the routing of the server, using the <code>ip route [add | change | replace | delete ]</code> syntax, but we won't be covering this here, because most people will will not be adjusting this on a regular basis</p>
<h2>Additional Capabilities of IPRoute2</h2>
<p>IPRoute2 has some additional capabilities that we will not be able to discuss in-depth in this guide. Instead, we will talk about what these are and what situations you may find them useful.</p>
<p>The idea of IP routing rules is difficult to talk about because it is very situation dependent. Basically, you can decide on how to route traffic based on a number of fields, including target address, source address, routing protocol, packet size, etc.</p>
<p>We access this functionality by using the ip rule subcommand. The basic querying follows the general pattern of the other subcommands:</p>
<div class="highlight"><pre><span></span><code><span class="nv">ip</span><span class="w"> </span><span class="nv">rule</span><span class="w"> </span><span class="k">show</span>
<span class="mi">0</span>:<span class="w">  </span><span class="nv">from</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">lookup</span><span class="w"> </span><span class="nv">local</span><span class="w"> </span>
<span class="mi">32766</span>:<span class="w">  </span><span class="nv">from</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">lookup</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span>
<span class="mi">32767</span>:<span class="w">  </span><span class="nv">from</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">lookup</span><span class="w"> </span><span class="nv">default</span>
</code></pre></div>

<p>These three routing rules are the default rules configured by the kernel. The first line matches any traffic and is used to route high priority traffic. The second line is the main rule that handles normal routing. The last one is an empty rule that is used for post-processing if the rules above didn't match the packet.</p>
<p>Routing rules, as configured by the IPRoute2 software, are stored in a routing policy database, where the policy is selected by matching against sets of rules. We can add or delete rules using the appropriate actions. You should not do this without knowing what you are doing however. Look at the man pages and search for ip rule for more information.</p>
<div class="highlight"><pre><span></span><code><span class="nv">man</span><span class="w"> </span><span class="nv">ip</span><span class="w">         </span>#<span class="w"> </span><span class="nv">search</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">&quot;ip rule&quot;</span>
</code></pre></div>

<p>Another thing that we'll discuss briefly is the handling of arp information through these tools. The subcommand that deals with this information is called ip neigh.</p>
<div class="highlight"><pre><span></span><code><span class="nx">ip</span><span class="w"> </span><span class="nx">neigh</span>
<span class="m m-Double">107.170.58.1</span><span class="w"> </span><span class="nx">dev</span><span class="w"> </span><span class="nx">eth0</span><span class="w"> </span><span class="nx">lladdr</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">5</span><span class="nx">e</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">68</span><span class="w"> </span><span class="nx">DELAY</span>
</code></pre></div>

<p>By default, this should at least list your gateway. Arp is a protocol used to gather information about physical devices accessible through the local network.</p>
<p>Basically, an arp request is broadcast over the local network whenever an IP address needs to be reached. The matching IP address responds and then the local computer knows where to send information to that IP address. This information is cached on the local system for some time (typically about 15 minutes) to avoid having to query during follow up communication.</p>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>





</article>

    <footer>
<p>
  &copy; 2021 Daniel Dai - <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">自由转载-非商用-非衍生-保持署名</a>
</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-nc-nd/3.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-nc-nd/3.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Daniel Dai的网络日志 ",
  "url" : "http://localhost:8000",
  "image": "http://localhost:8000/daniel_150.jpeg",
  "description": ""
}
</script>

</body>
</html>