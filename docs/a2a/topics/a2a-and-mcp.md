---
title: "A2A 和 MCP"
sidebar_position: 8
---

# A2A 和 MCP：详细比较

在 AI 智能体开发中，出现了两种关键的协议类型来促进互操作性。一种将智能体连接到工具和资源。另一种实现智能体到智能体的协作。智能体到智能体（A2A）协议和[模型上下文协议](https://modelcontextprotocol.io/)（MCP）满足这些不同但高度互补的需求。

## 模型上下文协议

模型上下文协议（MCP）定义了 AI 智能体如何与单个工具和资源（例如数据库或 API）交互和使用它们。

此协议提供以下能力：

- 标准化 AI 模型和智能体如何连接到工具、API 和其他外部资源并与之交互。
- 定义一种结构化的方式来描述工具能力，类似于大型语言模型中的函数调用。
- 将输入传递给工具并接收结构化输出。
- 支持常见用例，例如 LLM 调用外部 API、智能体查询数据库或智能体连接到预定义函数。

## 智能体到智能体协议

智能体到智能体协议专注于使不同的智能体能够相互协作以实现共同目标。

此协议提供以下能力：

- 标准化独立的、通常不透明的 AI 智能体如何作为对等体进行通信和协作。
- 为智能体提供应用程序级协议，以便相互发现、协商交互、管理共享任务以及交换对话上下文和复杂数据。
- 支持典型用例，包括客户服务智能体将查询委派给计费智能体，或旅行智能体与航班、酒店和活动智能体协调。

## 为什么需要不同的协议？

MCP 和 A2A 协议对于构建复杂的 AI 系统都至关重要，它们满足不同但高度互补的需求。A2A 和 MCP 之间的区别取决于智能体与什么交互。

- **工具和资源（MCP 域）**：
      - **特征：** 这些通常是具有明确定义的结构化输入和输出的原语。它们执行特定的、通常是无状态的功能。示例包括计算器、数据库查询 API 或天气查询服务。
      - **目的：** 智能体使用工具来收集信息并执行离散功能。
- **智能体（A2A 域）**：
      - **特征：** 这些是更自主的系统。它们进行推理、计划、使用多个工具、在较长的交互中保持状态，并参与复杂的、通常是多轮的对话以实现新颖或不断发展的任务。
      - **目的：** 智能体与其他智能体协作以解决更广泛、更复杂的目标。

## A2A ❤️ MCP：智能体系统的互补协议

智能体应用程序可能主要使用 A2A 与其他智能体通信。每个单独的智能体在内部使用 MCP 与其特定工具和资源交互。

<div style={{textAlign: 'center', margin: '20px'}}>

![显示 A2A 和 MCP 协同工作的图表。用户使用 A2A 与智能体 A 交互。智能体 A 使用 A2A 与智能体 B 交互。智能体 B 使用 MCP 与工具 1 和工具 2 交互。](../assets/a2a-mcp.png)

_智能体应用程序可能使用 A2A 与其他智能体通信，而每个智能体在内部使用 MCP 与其特定工具和资源交互。_

</div>

### 示例场景：汽车维修店

考虑一个由自主 AI 智能体"机械师"组成的汽车维修店。这些机械师使用专用工具，例如车辆诊断扫描仪、维修手册和升降平台，来诊断和修复问题。维修过程可能涉及与零件供应商的广泛对话、研究和交互。

- **客户交互（使用 A2A 的用户到智能体）**：客户（或其主要助手智能体）使用 A2A 与"店长"智能体通信。

    例如，客户可能会说，"我的车发出咔嗒声"。

- **多轮诊断对话（使用 A2A 的智能体到智能体）**：店长智能体使用 A2A 进行多轮诊断对话。

    例如，店长可能会问，"你能发送噪音的视频吗？"或"我看到有一些液体泄漏。这种情况发生多久了？"。

- **内部工具使用（使用 MCP 的智能体到工具）**：由店长分配任务的机械师智能体需要诊断问题。机械师智能体使用 MCP 与其专用工具交互。

    例如：

    - 对"车辆诊断扫描仪"工具的 MCP 调用：
        `scan_vehicle_for_error_codes(vehicle_id='XYZ123')`
    - 对"维修手册数据库"工具的 MCP 调用：
        `get_repair_procedure(error_code='P0300', vehicle_make='Toyota',
        vehicle_model='Camry')`
    - 对"升降平台"工具的 MCP 调用：`raise_platform(height_meters=2)`

- **供应商交互（使用 A2A 的智能体到智能体）**：机械师智能体确定需要特定零件。机械师智能体使用 A2A 与"零件供应商"智能体通信以订购零件。
    例如，机械师智能体可能会问，"你有 2018 丰田凯美瑞的零件 #12345 库存吗？"

- **订单处理（使用 A2A 的智能体到智能体）**：零件供应商智能体也是符合 A2A 标准的系统，它会响应，可能导致订单。

在此示例中：

- A2A 促进了客户与维修店之间以及维修店的智能体与外部供应商智能体之间更高级别的、对话式的和面向任务的交互。
- MCP 使机械师智能体能够使用其特定的结构化工具来执行其诊断和维修功能。

A2A 服务器可以将其某些技能公开为 MCP 兼容资源。然而，A2A 的主要优势在于它支持更灵活、有状态和协作的交互。这些交互超出了典型的工具调用。A2A 专注于智能体在任务上的合作，而 MCP 专注于智能体使用能力。

## 将 A2A 智能体表示为 MCP 资源

A2A 服务器（远程智能体）可以将其某些技能公开为 MCP 兼容资源，尤其是在这些技能定义明确并且可以以更类似工具的无状态方式调用时。在这种情况下，另一个智能体可能通过 MCP 样式的工具描述（可能从其智能体卡片派生）"发现"此 A2A 智能体的特定技能。

然而，A2A 的主要优势在于它支持更灵活、有状态和协作的交互，这些交互超出了典型的工具调用。A2A 是关于智能体在任务上的_合作_，而 MCP 更多的是关于智能体_使用_能力。

通过利用 A2A 进行智能体间协作和 MCP 进行工具集成，开发者可以构建更强大、更灵活和更具互操作性的 AI 系统。
