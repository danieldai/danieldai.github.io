<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; }
      .subtitle { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
      .text { font-family: Arial, sans-serif; font-size: 12px; }
      .box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .phase1 { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
      .phase2 { fill: #e8f5e8; stroke: #388e3c; stroke-width: 2; }
      .arrow { stroke: #424242; stroke-width: 2; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#424242" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" class="title" text-anchor="middle">Mem0 两阶段记忆管道工作流程</text>
  <text x="400" y="50" class="subtitle" text-anchor="middle">Mem0 Two-Phase Memory Pipeline Workflow</text>
  
  <!-- Phase 1 Background -->
  <rect x="50" y="80" width="700" height="200" class="phase1" rx="10"/>
  <text x="70" y="100" class="subtitle">第一阶段: 提取 (Phase 1: Extraction)</text>
  
  <!-- Input -->
  <rect x="70" y="130" width="120" height="60" class="box" rx="5"/>
  <text x="130" y="155" class="text" text-anchor="middle">输入对话</text>
  <text x="130" y="170" class="text" text-anchor="middle">Input Dialog</text>
  
  <!-- Context Sources -->
  <rect x="220" y="110" width="100" height="40" class="box" rx="5"/>
  <text x="270" y="130" class="text" text-anchor="middle">最新交换</text>
  <text x="270" y="145" class="text" text-anchor="middle">Latest Exchange</text>
  
  <rect x="220" y="160" width="100" height="40" class="box" rx="5"/>
  <text x="270" y="180" class="text" text-anchor="middle">滚动摘要</text>
  <text x="270" y="195" class="text" text-anchor="middle">Rolling Summary</text>
  
  <rect x="220" y="210" width="100" height="40" class="box" rx="5"/>
  <text x="270" y="230" class="text" text-anchor="middle">最近m条消息</text>
  <text x="270" y="245" class="text" text-anchor="middle">Recent m Messages</text>
  
  <!-- LLM Extraction -->
  <rect x="350" y="130" width="120" height="60" class="box" rx="5"/>
  <text x="410" y="155" class="text" text-anchor="middle">LLM提取</text>
  <text x="410" y="170" class="text" text-anchor="middle">LLM Extraction</text>
  
  <!-- Candidate Memories -->
  <rect x="500" y="130" width="120" height="60" class="box" rx="5"/>
  <text x="560" y="155" class="text" text-anchor="middle">候选记忆</text>
  <text x="560" y="170" class="text" text-anchor="middle">Candidate Memories</text>
  
  <!-- Phase 2 Background -->
  <rect x="50" y="320" width="700" height="220" class="phase2" rx="10"/>
  <text x="70" y="340" class="subtitle">第二阶段: 更新 (Phase 2: Update)</text>
  
  <!-- Vector Database -->
  <rect x="70" y="370" width="120" height="60" class="box" rx="5"/>
  <text x="130" y="395" class="text" text-anchor="middle">向量数据库</text>
  <text x="130" y="410" class="text" text-anchor="middle">Vector Database</text>
  
  <!-- Similarity Comparison -->
  <rect x="220" y="370" width="120" height="60" class="box" rx="5"/>
  <text x="280" y="395" class="text" text-anchor="middle">相似性比较</text>
  <text x="280" y="410" class="text" text-anchor="middle">Similarity Comparison</text>
  
  <!-- LLM Decision -->
  <rect x="370" y="370" width="120" height="60" class="box" rx="5"/>
  <text x="430" y="395" class="text" text-anchor="middle">LLM决策</text>
  <text x="430" y="410" class="text" text-anchor="middle">LLM Decision</text>
  
  <!-- Operations -->
  <rect x="520" y="350" width="80" height="40" class="box" rx="5"/>
  <text x="560" y="370" class="text" text-anchor="middle">ADD</text>
  
  <rect x="610" y="350" width="80" height="40" class="box" rx="5"/>
  <text x="650" y="370" class="text" text-anchor="middle">UPDATE</text>
  
  <rect x="520" y="400" width="80" height="40" class="box" rx="5"/>
  <text x="560" y="420" class="text" text-anchor="middle">DELETE</text>
  
  <rect x="610" y="400" width="80" height="40" class="box" rx="5"/>
  <text x="650" y="420" class="text" text-anchor="middle">NOOP</text>
  
  <!-- Updated Memory Store -->
  <rect x="300" y="470" width="150" height="60" class="box" rx="5"/>
  <text x="375" y="495" class="text" text-anchor="middle">更新的记忆存储</text>
  <text x="375" y="510" class="text" text-anchor="middle">Updated Memory Store</text>
  
  <!-- Arrows -->
  <line x1="190" y1="160" x2="210" y2="160" class="arrow"/>
  <line x1="330" y1="160" x2="340" y2="160" class="arrow"/>
  <line x1="470" y1="160" x2="490" y2="160" class="arrow"/>
  <line x1="560" y1="200" x2="560" y2="300" class="arrow"/>
  <line x1="560" y1="300" x2="130" y2="300" class="arrow"/>
  <line x1="130" y1="300" x2="130" y2="360" class="arrow"/>
  <line x1="190" y1="400" x2="210" y2="400" class="arrow"/>
  <line x1="340" y1="400" x2="360" y2="400" class="arrow"/>
  <line x1="490" y1="400" x2="510" y2="400" class="arrow"/>
  <line x1="580" y1="450" x2="580" y2="460" class="arrow"/>
  <line x1="580" y1="460" x2="400" y2="460" class="arrow"/>
  <line x1="400" y1="460" x2="400" y2="450" class="arrow"/>
</svg>